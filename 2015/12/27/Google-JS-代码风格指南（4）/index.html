<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description"/><title>Google JS 代码风格指南（4） | craft的写字板</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Google JS 代码风格指南（4）</h1><a id="logo" href="/">craft的写字板</a><p class="description"></p></div><div id="nav-menu"><a href="/" class="current"><i class="icon-home"> 首页</i></a><a href="/archives/"><i class="icon-archive"> 归档</i></a><a href="/atom.xml"><i class="icon-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">Google JS 代码风格指南（4）</h1><div class="post-meta">2015-12-27 | </div><span data-thread-key="2015/12/27/Google-JS-代码风格指南（4）/" class="ds-thread-count"></span><div class="post-content"><h2 id="JavaScript__u4EE3_u7801_u98CE_u683C_u6307_u5357"><a href="#JavaScript__u4EE3_u7801_u98CE_u683C_u6307_u5357" class="headerlink" title="JavaScript 代码风格指南"></a>JavaScript 代码风格指南</h2><p>这份指南列出了编写 JavaScript 时需要遵守的规范, 指明哪些应该<strong>提倡</strong>, 哪些应该<del>避免</del>.<br>本文基于 google 的规范翻译整理(JavaScript 是许多 Google 开源项目使用的主要客户端脚本语言).</p>
<h3 id="284_29"><a href="#284_29" class="headerlink" title="(4)"></a>(4)</h3><h3 id="JavaScript__u4EE3_u7801_u98CE_u683C_u89C4_u8303_283_29"><a href="#JavaScript__u4EE3_u7801_u98CE_u683C_u89C4_u8303_283_29" class="headerlink" title="JavaScript 代码风格规范(3)"></a>JavaScript 代码风格规范(3)</h3><h4 id="u6CE8_u91CA"><a href="#u6CE8_u91CA" class="headerlink" title="注释"></a>注释</h4><p>使用 JSDoc.</p>
<blockquote>
<p>在精神上, 我们遵循<a href="http://google.github.io/styleguide/cppguide.xml#Comments" target="_blank" rel="external"> C++ 注释风格</a>的指导.</p>
</blockquote>
<p>所有文件, 类, 方法和属性都应该通过合适的<a href="http://google.github.io/styleguide/javascriptguide.xml#JSDoc_Tag_Reference" target="_blank" rel="external">标签</a>和<a href="http://google.github.io/styleguide/javascriptguide.xml#JsTypes" target="_blank" rel="external">类型说明</a>使用 <a href="http://code.google.com/p/jsdoc-toolkit/" target="_blank" rel="external">JSDoc</a> 进行注释. 除非从属性, 方法和参数的命名中可以清晰地判断其用途, 否则在注释中应当包含对属性, 方法, 方法参数和方法返回值的文字描述.</p>
<p>行内注释应当使用 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;&#25512;&#33616;&#22312;&#27880;&#37322;&#20013;&#20351;&#29992;&#23436;&#25972;&#30340;&#21477;&#23376;, &#20294;&#19981;&#20570;&#20005;&#26684;&#35201;&#27714;. &#23436;&#25972;&#21477;&#23376;&#24212;&#24403;&#27491;&#30830;&#20351;&#29992;&#22823;&#23567;&#20889;&#21644;&#26631;&#28857;&#31526;&#21495;.&#10;&#10;** &#27880;&#37322;&#35821;&#27861; **&#10;&#10;JSDoc &#30340;&#35821;&#27861;&#22522;&#20110; [JavaDoc](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html). &#26377;&#35768;&#22810;&#24037;&#20855;&#21487;&#20197;&#20174; JSDoc &#27880;&#37322;&#20013;&#25552;&#21462;&#20803;&#25968;&#25454;&#26469;&#25191;&#34892;&#20195;&#30721;&#26657;&#39564;&#21644;&#20248;&#21270;. &#36825;&#20123;&#27880;&#37322;&#24517;&#39035;&#36981;&#24490;&#27491;&#30830;&#30340;&#26684;&#24335;.&#10;&#10;```javascript&#10;/**&#10; * JSDoc &#30340;&#27880;&#37322;&#24212;&#24403;&#20197;&#26012;&#21010;&#32447;&#21644;&#20004;&#20010;&#26143;&#21495;&#25171;&#22836;.&#10; * &#34892;&#20869;&#26631;&#31614;&#24212;&#35813;&#25918;&#22312;&#38381;&#21512;&#30340;&#33457;&#25324;&#21495;&#20013;, &#23601;&#20687;&#36825;&#26679;: &#123;@code this&#125;.&#10; * @desc &#22359;&#32423;&#26631;&#31614;&#24212;&#24403;&#24635;&#26159;&#21478;&#36215;&#26032;&#34892;.&#10; */</span><br></pre></td></tr></table></figure></p>
<p><strong> JSDoc 缩进 </strong></p>
<p>如果你需要对一个块级标签折行, 你应当就像视其为代码块那样缩进 4 格.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 长参数和返回值描述的折行处理示例.</span><br><span class="line"> * @param &#123;string&#125; foo 这是某个参数的描述, 由于太长太长太长太长太长太长太长以至于一行内</span><br><span class="line"> *     有点放不下.</span><br><span class="line"> * @return &#123;number&#125; 这是某个返回值的描述, 由于太长太长太长太长太长太长太长以至于一行内</span><br><span class="line"> *     有点放不下.</span><br><span class="line"> */</span></span><br><span class="line">project.MyClass.prototype.method = <span class="function"><span class="keyword">function</span>(<span class="params">foo</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>你不应该缩进 <figure class="highlight"><figcaption><span>命令. 你不必缩进 ```@desc``` 命令.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;&#21363;&#20351;&#24182;&#19981;&#25512;&#33616;, &#20294;&#23545;&#40784;&#32553;&#36827;&#30340;&#26041;&#24335;&#20063;&#21487;&#20197;&#25509;&#21463;.&#10;&#10;```javascript&#10;/**&#10; * &#24182;&#19981;&#25512;&#33616;&#30340;&#32553;&#36827;&#26041;&#24335;..&#10; * @param &#123;string&#125; foo &#36825;&#26159;&#26576;&#20010;&#21442;&#25968;&#30340;&#25551;&#36848;, &#30001;&#20110;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#20197;&#33267;&#20110;&#19968;&#34892;&#20869;&#10; *                     &#26377;&#28857;&#25918;&#19981;&#19979;.&#10; * @return &#123;number&#125; &#36825;&#26159;&#26576;&#20010;&#36820;&#22238;&#20540;&#30340;&#25551;&#36848;, &#30001;&#20110;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#22826;&#38271;&#20197;&#33267;&#20110;&#19968;&#34892;&#20869;&#10; *                  &#26377;&#28857;&#25918;&#19981;&#19979;.&#10; */&#10;project.MyClass.prototype.method = function(foo) &#123;&#10;  return 5;&#10;&#125;;</span><br></pre></td></tr></table></figure></p>
<p><strong> JSDoc 中的 HTML </strong></p>
<p>类似 JavaDoc, JSDoc 也支持许多 HTML 标签, 诸如 <code>&lt;code&gt;</code>, <code>&lt;pre&gt;</code>, <code>&lt;tt&gt;</code>, <code>&lt;strong&gt;</code>, <code>&lt;ul&gt;</code>, <code>&lt;ol&gt;</code>, <code>&lt;li&gt;</code>, <code>&lt;a&gt;</code> 等等.</p>
<p>这意味着最好不要对纯文本格式化, 不要依赖用空格来格式化 JSDoc:</p>
<p>不要像这样写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Computes weight based on three factors:</span><br><span class="line"> *   items sent</span><br><span class="line"> *   items received</span><br><span class="line"> *   last timestamp</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure>
<p>输出后它会这样显示:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Computes weight based on three factors: items sent items received last timestamp</span><br></pre></td></tr></table></figure>
<p>应该这样写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Computes weight based on three factors:</span><br><span class="line"> * &lt;ul&gt;</span><br><span class="line"> * &lt;li&gt;items sent</span><br><span class="line"> * &lt;li&gt;items received</span><br><span class="line"> * &lt;li&gt;last timestamp</span><br><span class="line"> * &lt;/ul&gt;</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure>
<p>如何书写排版优美的文档注释可以参看这篇文章: <a href="http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html" target="_blank" rel="external">JSDoc 风格指南</a>.</p>
<p><strong> 顶级/文件级注释 </strong></p>
<p>版权提示和作者信息是可选的.<br>无论文件是否包含超过一个类的定义, 一般都推荐加上文件概述.<br>顶级注释主要面向不熟悉代码的读者, 让他们大致了解文件内代码的用途.<br>因此注释中应当提供文件内容的描述, 依赖关系或者兼容信息.<br>下面是一个例子:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * @fileoverview Description of file, its uses and information</span><br><span class="line"> * about its dependencies.</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure>
<p><strong> 类注释 </strong></p>
<p>类的文档注释应当包含一份描述信息和<a href="http://google.github.io/styleguide/javascriptguide.xml#constructor-tag" target="_blank" rel="external">定义构造函数的类型标签</a>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 类让事情变得简单又有趣.</span><br><span class="line"> * @param &#123;string&#125; arg1 让它变得更有趣的参数.</span><br><span class="line"> * @param &#123;Array.&lt;number&gt;&#125; arg2 待处理的数字列表.</span><br><span class="line"> * @constructor</span><br><span class="line"> * @extends &#123;goog.Disposable&#125;</span><br><span class="line"> */</span></span><br><span class="line">project.MyClass = <span class="function"><span class="keyword">function</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line">goog.inherits(project.MyClass, goog.Disposable);</span><br></pre></td></tr></table></figure>
<p><strong> 方法和函数注释 </strong></p>
<p>应当包含参数和返回值类型的文档注释. 如果从参数或者返回值类型描述中明显能看出方法的作用, 那么可以省略对方法的描述. 方法描述应该使用第三人称的陈述句来开头.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 对 MyClass 的一个实例进行操作并返回了一些东西.</span><br><span class="line"> * @param &#123;project.MyClass&#125; obj MyClass 的实例, 有个老长老长老长的注释, 长到需要</span><br><span class="line"> *     放到拆成两行来显示.</span><br><span class="line"> * @return &#123;boolean&#125; 判断某些事情是否发生.</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PR_someMethod</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong> 属性注释 </strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** @constructor */</span></span><br><span class="line">project.MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/**</span><br><span class="line">   * Maximum number of things per pane.</span><br><span class="line">   * @type &#123;number&#125;</span><br><span class="line">   */</span></span><br><span class="line">  <span class="keyword">this</span>.someProperty = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong> JSDoc 标签参考 </strong></p>
<p>参见下表：</p>
<p><a href="/static/JSDoc.html">JSDoc 标签</a></p>
<p>你还可以在第三方代码中看到许多其他类型的 JSDoc 注解. 整个注解可以在 JSDoc 工具箱标签索引中查询到, 但并不鼓励用于 Google 项目中. 你可以视这些注解为保留名, 可能会在将来投入使用. 它们包括:</p>
<ul>
<li>@augments</li>
<li>@argument</li>
<li>@borrows</li>
<li>@class</li>
<li>@constant</li>
<li>@constructs</li>
<li>@default</li>
<li>@event</li>
<li>@example</li>
<li>@field</li>
<li>@function</li>
<li>@ignore</li>
<li>@inner</li>
<li>@link</li>
<li>@memberOf</li>
<li>@name</li>
<li>@namespace</li>
<li>@property</li>
<li>@public</li>
<li>@requires</li>
<li>@returns</li>
<li>@since</li>
<li>@static</li>
<li>@version</li>
</ul>
<p><strong> 使用 goog.provide 提供依赖项 </strong></p>
<blockquote>
<p>只引入最顶级的符号.</p>
</blockquote>
<p>一个类定义的所有成员都应处于同一文件中. 因此, 在包含多个定义在同一类中的复数成员的文件中, 只应该引入最顶级的符号(例如枚举类型和内部类等).</p>
<p>应该这样:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goog.provide(<span class="string">'namespace.MyClass'</span>);</span><br></pre></td></tr></table></figure>
<p>不要这样:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">goog.provide(<span class="string">'namespace.MyClass'</span>);</span><br><span class="line">goog.provide(<span class="string">'namespace.MyClass.Enum'</span>);</span><br><span class="line">goog.provide(<span class="string">'namespace.MyClass.InnerClass'</span>);</span><br><span class="line">goog.provide(<span class="string">'namespace.MyClass.TypeDef'</span>);</span><br><span class="line">goog.provide(<span class="string">'namespace.MyClass.CONSTANT'</span>);</span><br><span class="line">goog.provide(<span class="string">'namespace.MyClass.staticMethod'</span>);</span><br><span class="line">Members on namespaces may also be provided:</span><br><span class="line"></span><br><span class="line">goog.provide(<span class="string">'foo.bar'</span>);</span><br><span class="line">goog.provide(<span class="string">'foo.bar.method'</span>);</span><br><span class="line">goog.provide(<span class="string">'foo.bar.CONSTANT'</span>);</span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/JavaScript/">JavaScript</a></div><div class="post-nav"><a href="/2015/12/27/Google-JS-代码风格指南（5）/" class="pre"><i class="icon-previous">Google JS 代码风格指南（5）</i></a><a href="/2015/12/27/Google-JS-代码风格指南（3）/" class="next">Google JS 代码风格指南（3）<i class="icon-next"></i></a></div><div data-thread-key="2015/12/27/Google-JS-代码风格指南（4）/" data-title="Google JS 代码风格指南（4）" data-url="http://crafteverywhere.github.io/2015/12/27/Google-JS-代码风格指南（4）/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2015/12/27/Google-JS-代码风格指南（4）/" data-title="Google JS 代码风格指南（4）" data-url="http://crafteverywhere.github.io/2015/12/27/Google-JS-代码风格指南（4）/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://crafteverywhere.github.io"/></form></div><div class="widget"><div class="widget-title">分类</div></div><div class="widget"><div class="widget-title">标签</div><div class="tagcloud"><a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a></div></div><div class="widget"><div class="widget-title">最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（5）/">Google JS 代码风格指南（5）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（4）/">Google JS 代码风格指南（4）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（3）/">Google JS 代码风格指南（3）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（2）/">Google JS 代码风格指南（2）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（1）/">Google JS 代码风格指南（1）</a></li></ul></div><div class="widget"><div class="comments-title">最近评论</div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title">友情链接</div><ul></ul><a href="http://crafteverywhere.github.io/tcresearch/" title="神秘时代5研究辅助工具" target="_blank">神秘时代5研究辅助工具</a><ul></ul><a href="https://www.zhihu.com/people/craftman" title="知乎" target="_blank">知乎</a><ul></ul><a href="http://www.douban.com/people/craftman/" title="豆瓣" target="_blank">豆瓣</a></div></div></div></div><div id="footer">© <a href="/" rel="nofollow">craft的写字板.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script>
<script src="/js/jquery.fancybox.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"><script>var duoshuoQuery = {short_name:'crafteverywhere'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script></div></body></html>