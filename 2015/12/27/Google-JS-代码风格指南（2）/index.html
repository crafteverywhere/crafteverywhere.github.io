<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description"/><title>Google JS 代码风格指南（2） | Zen</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Google JS 代码风格指南（2）</h1><a id="logo" href="/">Zen</a><p class="description">craft‘s note</p></div><div id="nav-menu"><a href="/" class="current"><i class="icon-home"> Home</i></a><a href="/archives/"><i class="icon-archive"> Archive</i></a><a href="/atom.xml"><i class="icon-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">Google JS 代码风格指南（2）</h1><div class="post-meta">2015-12-27 | </div><span data-thread-key="2015/12/27/Google-JS-代码风格指南（2）/" class="ds-thread-count"></span><div class="post-content"><h2 id="JavaScript__u4EE3_u7801_u98CE_u683C_u6307_u5357"><a href="#JavaScript__u4EE3_u7801_u98CE_u683C_u6307_u5357" class="headerlink" title="JavaScript 代码风格指南"></a>JavaScript 代码风格指南</h2><p>这份指南列出了编写 JavaScript 时需要遵守的规范, 指明哪些应该<strong>提倡</strong>, 哪些应该<del>避免</del>.<br>本文基于 google 的规范翻译整理(JavaScript 是许多 Google 开源项目使用的主要客户端脚本语言).</p>
<h3 id="282_29"><a href="#282_29" class="headerlink" title="(2)"></a>(2)</h3><h3 id="JavaScript__u4EE3_u7801_u98CE_u683C_u89C4_u8303_281_29"><a href="#JavaScript__u4EE3_u7801_u98CE_u683C_u89C4_u8303_281_29" class="headerlink" title="JavaScript 代码风格规范(1)"></a>JavaScript 代码风格规范(1)</h3><h4 id="u547D_u540D_u89C4_u8303"><a href="#u547D_u540D_u89C4_u8303" class="headerlink" title="命名规范"></a>命名规范</h4><ul>
<li>一般情况下,按下列命名规范即可:</li>
<li>函数命名: <code>functionNamesLikeThis</code> (首字母小写驼峰式)</li>
<li>变量命名: <code>variableNamesLikeThis</code> (首字母小写驼峰式)</li>
<li>类命名: <code>ClassNamesLikeThis</code> (首字母大写驼峰式)</li>
<li>枚举量命名: <code>EnumNamesLikeThis</code> (首字母大写驼峰式)</li>
<li>方法命名: <code>methodNamesLikeThis</code> (首字母小写驼峰式)</li>
<li>常量命名: <code>CONSTANT_VALUES_LIKE_THIS</code> (全字母大写下划线式)</li>
<li>命名空间命名: <code>foo.namespaceNamesLikeThis.bar</code> (首字母小写驼峰式)</li>
<li>文件命名: <code>filenameslikethis.js</code> (全小写)</li>
</ul>
<p>译者附注：<br>在 google 规范的基础上， 我们还可以作如下调整：<br>变量命名在局部作用域使用 <code>variable_names_like_this</code> 全小写下划线分隔<br>变量命名在模块作用域使用 <code>variableNamesLikeThis</code> 首字母小写驼峰式</p>
<p>变量命名的基本规范：</p>
<ul>
<li>变量名只使用 a~z, A~Z, 0~9, 下划线， 中划线和 $ 符号.</li>
<li>变量名不能数字开头.</li>
</ul>
<p>应该在布尔量前加上前缀来区别于普通变量</p>
<ul>
<li>通用 <code>bool_var</code> <code>boolVar</code></li>
<li>请求 <code>do_verb</code> <code>doVerb</code></li>
<li>包含 <code>has_var</code> <code>hasVar</code></li>
<li>状态 <code>is_var</code> <code>isVar</code></li>
<li>绑定事件 ‘on_var’ ‘onVar’</li>
</ul>
<p>对正则变量加上前缀 <code>regex</code>, 如 <code>regex_var</code> 和 <code>regexVar</code>.</p>
<p>变量后可以选择加后缀来标识其用途，如果处于合理的伪命名空间中，也可以不用:</p>
<ul>
<li>通用 <code>var_str</code> <code>varStr</code></li>
<li>标识 <code>var_id</code> <code>varId</code></li>
<li>HTML <code>var_html</code> <code>varHtml</code></li>
<li>消息 <code>var_msg</code> <code>varMsg</code></li>
<li>名字 <code>var_name</code> <code>varName</code></li>
<li>文本 <code>var_text</code> <code>varText</code></li>
<li>类型 <code>var_type</code> <code>var_Type</code></li>
<li>图片 <code>var_img</code> <code>varImg</code></li>
<li>声音 <code>var_snd</code> <code>varSnd</code></li>
<li>列表 <code>var_list</code> <code>varList</code></li>
<li>数据 <code>var_data</code> <code>varData</code></li>
<li>映射 <code>var_map</code> <code>varMap</code></li>
</ul>
<p><strong> 属性和方法 </strong></p>
<ul>
<li>私有(<em> <code>private</code> </em>)属性和方法命名应该以下划线 _ 开头;</li>
<li>受限(<em> <code>protected</code> </em>)属性和方法不需要下划线开头, 和公共变量保持一致.</li>
</ul>
<p>想要查阅更多关于 <code>private</code> 和 <code>protected</code> 的资料, 可以阅读本指南的<strong> 可见性 </strong>部分.</p>
<p><strong> 方法和函数参数 </strong></p>
<p>可缺省函数参数以 <code>opt_</code> 开头.</p>
<p>如果函数拥有不定参数, 那么应该添加一个名为 <code>var_args</code> 的参数作为最后一个参数. 如果不想在代码中使用 <code>var_args</code> , 也可以使用 <code>arguments</code> 伪数组.</p>
<p>可缺省参数和不定参数可以使用 <code>@param</code> 标记. 尽管是否这样做对解释器来说都可以接受, 但都使用是推荐的做法.</p>
<p><strong> 属性访问器 (Getters 和 Setters) </strong></p>
<p>EcmaScript 5 不推荐使用对象属性的 <code>getters</code> 和 <code>setters</code>.<br>然而, 如果你已经使用了它们, 请务必注意不要让 <code>getters</code> 去改变显著的对象属性状态.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 错误 -- 不要这样做.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">var</span> foo = &#123; get next() &#123; <span class="keyword">return</span> <span class="keyword">this</span>.nextId++; &#125; &#125;;</span><br></pre></td></tr></table></figure>
<p><strong> 函数访问器 </strong></p>
<p>也不对函数属性的 <code>getters</code> 和 <code>setters</code> 做要求. 然而, 如果已经使用来它们, 请将 <code>getters</code> 按 <code>getFoo()</code> 的形式命名, 而 <code>setters</code> 则必须命名成 <code>setFoo(value)</code> 的形式. (对布尔变量类型的 <code>getters</code> , <code>isFoo()</code> 形式的命名也可以接受, 而且这样同样也更加自然.)</p>
<p><strong> 命名空间 </strong></p>
<p>JavaScript 自身并没有对包和命名空间的支持.</p>
<p>全局变量的冲突非常难以调试, 而且当涉及多个项目集成时, 经常造成棘手的难题. 为了减少公共分享 JS 代码时可能出现的冲突问题, 我们应当遵循下列规范.</p>
<ul>
<li>在全局代码中使用伪命名空间</li>
</ul>
<p>在全局作用域中, <strong>始终</strong>将一个和库或项目关联的前缀标识名作为伪命名空间来使用.<br>如果你正在开发的项目名为”Porject Sloth”, 则一个合理的伪命名空间应该是 sloth.*.</p>
<p>代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sloth = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">sloth.sleep = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>一些类似 the Closure Library 和  Dojo toolkit 这样的 JS 库会提供一些高阶方法来声明命名空间.<br>使用统一的方法来声明命名空间.</p>
<p>代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">goog.provide(<span class="string">'sloth'</span>);</span><br><span class="line"></span><br><span class="line">sloth.sleep = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>尊重命名空间的所有权</li>
</ul>
<p>当选择在一个子命名空间下进行开发, 请确保父命名空间的所有者知道你正在进行的工作. 如果你正在开发一个为 sloth 创建 hats 的项目, 请确保开发 Sloth 的团队 了解你使用了 sloth.hats 作为命名空间.</p>
<ul>
<li>对外部代码和内部代码使用不同的命名空间</li>
</ul>
<p>“外部代码”指那些独立于你的代码体系可以独立编译的代码. 外部代码和内部代码的命名空间应该保持严格的隔离. 如果你使用来一个外部库, 其对象都处于 foo.hats.<em> 命名空间下, 你的内部代码就不该定义在 foo.hats.</em> 下定义任何东西, 因为当其他团队试图定义新的对象时就可能会与之发生冲突.</p>
<p>不要像这样写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">foo.require(<span class="string">'foo.hats'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 错误 -- 不要像这样写.</span><br><span class="line"> * @constructor</span><br><span class="line"> * @extends &#123;foo.hats.RoundHat&#125;</span><br><span class="line"> */</span></span><br><span class="line">foo.hats.BowlerHat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>如果你需要在外部命名空间中定义新的 API, 那你应该显式地导出公共 API 函数, 并且仅仅只导出这些函数. 当你的内部代码需要调用这些 API 时, 可以直接通过内部命名来调用, 这是为了保持一致性, 并且可以让编译器能更好地进行优化.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">foo.provide(<span class="string">'googleyhats.BowlerHat'</span>);</span><br><span class="line"></span><br><span class="line">foo.require(<span class="string">'foo.hats'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * @constructor</span><br><span class="line"> * @extends &#123;foo.hats.RoundHat&#125;</span><br><span class="line"> */</span></span><br><span class="line">googleyhats.BowlerHat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">goog.exportSymbol(<span class="string">'foo.hats.BowlerHat'</span>, googleyhats.BowlerHat);</span><br></pre></td></tr></table></figure>
<ul>
<li>使用别名引用长名以增强可读性</li>
</ul>
<p>在局部作用域中可以使用别名来引用完整包名能够增强可读性.<br>局部作用域中别名的命名应和完整包名的最后一部分相匹配.</p>
<p>代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * @constructor</span><br><span class="line"> */</span></span><br><span class="line">some.long.namespace.MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * @param &#123;some.long.namespace.MyClass&#125; a</span><br><span class="line"> */</span></span><br><span class="line">some.long.namespace.MyClass.staticHelper = <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myapp.main = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> MyClass = some.long.namespace.MyClass;</span><br><span class="line">  <span class="keyword">var</span> staticHelper = some.long.namespace.MyClass.staticHelper;</span><br><span class="line">  staticHelper(<span class="keyword">new</span> MyClass());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>不要在局部作用域中为命名空间创建别名.<br>仅仅当使用 <code>goog.scope</code> 时才能为命名空间创建别名.</p>
<p>不要像这样写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myapp.main = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> namespace = some.long.namespace;</span><br><span class="line">  namespace.MyClass.staticHelper(<span class="keyword">new</span> namespace.MyClass());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>避免访问一个别名的属性, 除非它是枚举类型.</p>
<p>代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** @enum &#123;string&#125; */</span></span><br><span class="line">some.long.namespace.Fruit = &#123;</span><br><span class="line">  APPLE: <span class="string">'a'</span>,</span><br><span class="line">  BANANA: <span class="string">'b'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myapp.main = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> Fruit = some.long.namespace.Fruit;</span><br><span class="line">  <span class="keyword">switch</span> (fruit) &#123;</span><br><span class="line">    <span class="keyword">case</span> Fruit.APPLE:</span><br><span class="line">      ...</span><br><span class="line">    <span class="keyword">case</span> Fruit.BANANA:</span><br><span class="line">      ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>不要像这样写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myapp.main = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> MyClass = some.long.namespace.MyClass;</span><br><span class="line">  MyClass.staticHelper(<span class="literal">null</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>千万不要在全局作用域中使用别名. 仅当处于函数块内才考虑使用它们.</p>
<ul>
<li>文件命名</li>
</ul>
<p>文件名应该全部使用小写字母, 避免在某些大小写敏感的平台造成混乱. 文件名应以.js作为后缀, 且文件名中不应该包含 - 或 <em> 以外的标点符号(优先使用 - ,接下来考虑使用 </em>).</p>
<h4 id="u81EA_u5B9A_u4E49_toString_28_29__u65B9_u6CD5"><a href="#u81EA_u5B9A_u4E49_toString_28_29__u65B9_u6CD5" class="headerlink" title="自定义 toString() 方法"></a>自定义 toString() 方法</h4><ul>
<li>应该总能调用成功, 且没有副作用.</li>
</ul>
<p>你可以通过自定义 toString() 方法来控制你的对象属性如何转化成字符串. 这没有什么问题, 但你需要确保你的方法做到 (1) 总是能调用成功且 (2) 不会造成副作用. 如果你的方法不能满足上述条件, 很容易会造成严重问题. 例如, 如果 toString() 调用一个包含 assert 的方法, 当调用失败时 assert 会尝试输出失败的对象名, 结果又会调用 toString().</p>
<h4 id="u5EF6_u8FDF_u521D_u59CB_u5316"><a href="#u5EF6_u8FDF_u521D_u59CB_u5316" class="headerlink" title="延迟初始化"></a>延迟初始化</h4><ul>
<li>没问题</li>
</ul>
<p>并不是总能在声明变量时初始化变量. 延迟初始化没有什么问题.</p>
<h4 id="u660E_u786E_u4F5C_u7528_u57DF"><a href="#u660E_u786E_u4F5C_u7528_u57DF" class="headerlink" title="明确作用域"></a>明确作用域</h4><ul>
<li>始终明确作用域</li>
</ul>
<p>任何时候都需要明确作用域 - 这样能够提高代码的可移植性和清晰度. 例如, 不应该依赖作用域链中的 window 对象. 有时你会希望在别的应用调用你的函数, 此时使用的 window 对象并非之前的窗口对象.</p>
<h4 id="u4EE3_u7801_u683C_u5F0F"><a href="#u4EE3_u7801_u683C_u5F0F" class="headerlink" title="代码格式"></a>代码格式</h4><blockquote>
<p>精神上遵从 C++ 格式规范, 做一些额外的补充:</p>
</blockquote>
<ul>
<li>大括号</li>
</ul>
<p>因为会隐式地插入分号, 所以无论括号是否在一行内闭合, 东欧应当将花括号和前面的代码放在一行中, 如下面的代码所示:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (something) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>数组和对象初始化</li>
</ul>
<p>如果放在一行比较合适, 单行的数组和对象初始化可以放在一行内完成:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];  <span class="comment">// 前后皆无空格.</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;a: <span class="number">1</span>, b: <span class="number">2</span>, c: <span class="number">3</span>&#125;;  <span class="comment">// 前后皆无空格.</span></span><br></pre></td></tr></table></figure>
<p>多行数组和对象的初始化应当缩进两个空格, 花括号单独成行, 类似代码块.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象初始化.</span></span><br><span class="line"><span class="keyword">var</span> inset = &#123;</span><br><span class="line">  top: <span class="number">10</span>,</span><br><span class="line">  right: <span class="number">20</span>,</span><br><span class="line">  bottom: <span class="number">15</span>,</span><br><span class="line">  left: <span class="number">12</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组初始化.</span></span><br><span class="line"><span class="keyword">this</span>.rows_ = [</span><br><span class="line">  <span class="string">'"Slartibartfast" &lt;fjordmaster@magrathea.com&gt;'</span>,</span><br><span class="line">  <span class="string">'"Zaphod Beeblebrox" &lt;theprez@universe.gov&gt;'</span>,</span><br><span class="line">  <span class="string">'"Ford Prefect" &lt;ford@theguide.com&gt;'</span>,</span><br><span class="line">  <span class="string">'"Arthur Dent" &lt;has.no.tea@gmail.com&gt;'</span>,</span><br><span class="line">  <span class="string">'"Marvin the Paranoid Android" &lt;marv@googlemail.com&gt;'</span>,</span><br><span class="line">  <span class="string">'the.mice@magrathea.com'</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于方法调用.</span></span><br><span class="line">goog.dom.createDom(goog.dom.TagName.DIV, &#123;</span><br><span class="line">  id: <span class="string">'foo'</span>,</span><br><span class="line">  className: <span class="string">'some-css-class'</span>,</span><br><span class="line">  style: <span class="string">'display:none'</span></span><br><span class="line">&#125;, <span class="string">'Hello, world!'</span>);</span><br></pre></td></tr></table></figure>
<p>比较长的标识名或数值会使得对齐的初始化列表出现问题, 因此总是优先使用不对齐的初始化方式. 如下例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CORRECT_Object.prototype = &#123;</span><br><span class="line">  a: <span class="number">0</span>,</span><br><span class="line">  b: <span class="number">1</span>,</span><br><span class="line">  lengthyName: <span class="number">2</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>不要这样写:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">WRONG_Object.prototype = &#123;</span><br><span class="line">  a          : <span class="number">0</span>,</span><br><span class="line">  b          : <span class="number">1</span>,</span><br><span class="line">  lengthyName: <span class="number">2</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>函数参数</li>
</ul>
<p>尽可能让所有的函数参数处于同一行, 但如果一行内宽度超过了 80 列的限制, 应当以更可读的方式换行处理. 为了节约空间, 你可以尽可能保持行宽接近 80 , 如果为来更好的可都性, 甚至可以让每个参数都单独一行. 既可以缩进4空格, 也可以与函数的圆括号对齐. 下面上参数换行处理的几种通用模式:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4 空格缩进, 行宽保持在 80 左右. 适合函数名非常长的情况.</span></span><br><span class="line"><span class="comment">// 在函数重命名后无需重排缩进, 空间占用小.</span></span><br><span class="line">goog.foo.bar.doThingThatIsVeryDifficultToExplain = <span class="function"><span class="keyword">function</span>(<span class="params"></span><br><span class="line">    veryDescriptiveArgumentNumberOne, veryDescriptiveArgumentTwo,</span><br><span class="line">    tableModelEventHandlerProxy, artichokeDescriptorAdapterIterator</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4 空格缩进, 单参数独立成行. 适合函数名非常长的情况.</span></span><br><span class="line"><span class="comment">// 在函数重命名后无需重排, 强调来每个参数.</span></span><br><span class="line">goog.foo.bar.doThingThatIsVeryDifficultToExplain = <span class="function"><span class="keyword">function</span>(<span class="params"></span><br><span class="line">    veryDescriptiveArgumentNumberOne,</span><br><span class="line">    veryDescriptiveArgumentTwo,</span><br><span class="line">    tableModelEventHandlerProxy,</span><br><span class="line">    artichokeDescriptorAdapterIterator</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 小括号对齐缩进, 行宽保持在 80 左右.</span></span><br><span class="line"><span class="comment">// 可视的分组参数, 空间占用小.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">veryDescriptiveArgumentNumberOne, veryDescriptiveArgumentTwo,</span><br><span class="line">             tableModelEventHandlerProxy, artichokeDescriptorAdapterIterator</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 小括号对齐, 单参数独立成行.</span></span><br><span class="line"><span class="comment">// 强调来每个单独的参数.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">veryDescriptiveArgumentNumberOne,</span><br><span class="line">             veryDescriptiveArgumentTwo,</span><br><span class="line">             tableModelEventHandlerProxy,</span><br><span class="line">             artichokeDescriptorAdapterIterator</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果函数自身是缩进的, 你可以自由选择到底是根据初始语句的缩进位置再缩进 4 格还是依据当前所处函数调用的起始位置来缩进. 下面几种缩进风格都是接受的.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (veryLongFunctionNameA(</span><br><span class="line">        veryLongArgumentName) ||</span><br><span class="line">    veryLongFunctionNameB(</span><br><span class="line">    veryLongArgumentName)) &#123;</span><br><span class="line">  veryLongFunctionNameC(veryLongFunctionNameD(</span><br><span class="line">      veryLongFunctioNameE(</span><br><span class="line">          veryLongFunctionNameF)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>传递匿名函数</li>
</ul>
<p>当传入参数的列表中包含匿名函数的声明时, 匿名函数的函数体应该相对于该函数调用从左侧缩进 2 格, 或者也可以选择从该匿名函数关键字的左侧处缩进 2 格. 这样可以让匿名函数的函数体更容易阅读(例如, 不需要把内容主题全部挤到屏幕右侧去).</p>
<p>示例代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">prefix.something.reallyLongFunctionName(<span class="string">'whatever'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">a1, a2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a1.equals(a2)) &#123;</span><br><span class="line">    someOtherLongFunctionName(a1);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    andNowForSomethingCompletelyDifferent(a2.parrot);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> names = prefix.something.myExcellentMapFunction(</span><br><span class="line">    verboselyNamedCollectionOfItems,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item.name;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>配合 goog.scope 使用别名</li>
</ul>
<p>当使用 the Closure Library 库时, 可以使用 <code>goog.scope</code> 来缩短对命名空间的引用.</p>
<p>每个文件内只能使用一次 <code>goog.scope</code> 调用, 并且始终放置在全局作用域中.</p>
<p>在打开 <code>goog.scope(fuchuntion() {</code> 代码块前, 需要保留且只保留一个空行, 上接 <code>goog.provide</code> 语句, <code>goog.require</code> 语句, 或者高层级的注释. 该代码块必须在文件最后一行处关闭, 即把 }); 放在文件末行处. 在代码块闭合处附加注释 <code>// goog.scope</code>, 并且将代码块与注释用分号和两个空格分隔.</p>
<p>类似 C++ 命名空间, 不要在 <code>goog.scope</code> 内缩进, 直接顶格开始.</p>
<p>只使用那些不会给其他对象使用的别名(例如多数构造函数, 枚举变量或者命名空间).</p>
<p>不要像这样写(参看更下面的代码来了解如何对构造函数使用别名):</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// goog.scope 内</span></span><br><span class="line"><span class="keyword">var</span> Button = goog.ui.Button;</span><br><span class="line"></span><br><span class="line">Button = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ... &#125;;</span><br><span class="line"><span class="comment">/*...*/</span></span><br></pre></td></tr></table></figure>
<p>别名应该和全局下调用的最后一个属性名相一致:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">goog.provide(<span class="string">'my.module.SomeType'</span>);</span><br><span class="line"></span><br><span class="line">goog.require(<span class="string">'goog.dom'</span>);</span><br><span class="line">goog.require(<span class="string">'goog.ui.Button'</span>);</span><br><span class="line"></span><br><span class="line">goog.scope(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> Button = goog.ui.Button;</span><br><span class="line"><span class="keyword">var</span> dom = goog.dom;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Alias new types after the constructor declaration.</span></span><br><span class="line">my.module.SomeType = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ... &#125;;</span><br><span class="line"><span class="keyword">var</span> SomeType = my.module.SomeType;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Declare methods on the prototype as usual:</span></span><br><span class="line">SomeType.prototype.findButton = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Button as aliased above.</span></span><br><span class="line">  <span class="keyword">this</span>.button = <span class="keyword">new</span> Button(dom.getElement(<span class="string">'my-button'</span>));</span><br><span class="line">&#125;;</span><br><span class="line">...</span><br><span class="line">&#125;);  <span class="comment">// goog.scope</span></span><br></pre></td></tr></table></figure>
<ul>
<li>换行缩进</li>
</ul>
<p>除了对数组字面量, 对象字面量和匿名函数外, 换行都应该和上方同级表达式左对齐, 或则从父级表达式左侧处缩进 4 格(这里的父级和同级指的是括号嵌套的层级).</p>
<p>代码示例如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">someWonderfulHtml = <span class="string">''</span> +</span><br><span class="line">                    getEvenMoreHtml(someReallyInterestingValues, moreValues,</span><br><span class="line">                                    evenMoreParams, <span class="string">'a duck'</span>, <span class="literal">true</span>, <span class="number">72</span>,</span><br><span class="line">                                    slightlyMoreMonkeys(<span class="number">0xfff</span>)) +</span><br><span class="line">                    <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">thisIsAVeryLongVariableName =</span><br><span class="line">    hereIsAnEvenLongerOtherFunctionNameThatWillNotFitOnPrevLine();</span><br><span class="line"></span><br><span class="line">thisIsAVeryLongVariableName = siblingOne + siblingTwo + siblingThree +</span><br><span class="line">    siblingFour + siblingFive + siblingSix + siblingSeven +</span><br><span class="line">    moreSiblingExpressions + allAtTheSameIndentationLevel;</span><br><span class="line"></span><br><span class="line">thisIsAVeryLongVariableName = operandOne + operandTwo + operandThree +</span><br><span class="line">    operandFour + operandFive * (</span><br><span class="line">        aNestedChildExpression + shouldBeIndentedMore);</span><br><span class="line"></span><br><span class="line">someValue = <span class="keyword">this</span>.foo(</span><br><span class="line">    shortArg,</span><br><span class="line">    <span class="string">'非常非常非常非常长的字符串参数, 实际上这种情况经常出现.'</span>,</span><br><span class="line">    shorty2,</span><br><span class="line">    <span class="keyword">this</span>.bar());</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (searchableCollection(allYourStuff).contains(theStuffYouWant) &amp;&amp;</span><br><span class="line">    !ambientNotification.isActive() &amp;&amp; (client.isAmbientSupported() ||</span><br><span class="line">                                        client.alwaysTryAmbientAnyways())) &#123;</span><br><span class="line">  ambientNotification.activate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>空行</li>
</ul>
<p>对逻辑相关的一段代码开新行来写, 如下例所示:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doSomethingTo(x);</span><br><span class="line">doSomethingElseTo(x);</span><br><span class="line">andThen(x);</span><br><span class="line"></span><br><span class="line">nowDoSomethingWith(y);</span><br><span class="line"></span><br><span class="line">andNowWith(z);</span><br></pre></td></tr></table></figure>
<ul>
<li>二元和三元操作符</li>
</ul>
<p>总是将操作符保留在前行. 其他方面的换行和缩进规则遵循指南中提到的其他规范即可. 这种事先约定的方式可以无需顾虑分号隐式插入造成的问题. 实际上, 分号不可能被隐式地插入到二元操作符之前, 但所有的代码都应该遵循一致的风格规范.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = a ? b : c;  <span class="comment">// All on one line if it will fit.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Indentation +4 is OK.</span></span><br><span class="line"><span class="keyword">var</span> y = a ?</span><br><span class="line">    longButSimpleOperandB : longButSimpleOperandC;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Indenting to the line position of the first operand is also OK.</span></span><br><span class="line"><span class="keyword">var</span> z = a ?</span><br><span class="line">        moreComplicatedB :</span><br><span class="line">        moreComplicatedC;</span><br></pre></td></tr></table></figure>
<p>包括点操作符.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = foo.bar().</span><br><span class="line">    doSomething().</span><br><span class="line">    doSomethingElse();</span><br></pre></td></tr></table></figure>
<ul>
<li>小括号</li>
</ul>
<p>仅用于需要处. 成对使用, 一般情况下只在语法和语义要求处用括号.</p>
<p>在一元操作符(如 <code>delete</code>, <code>typeof</code> 和 <code>void</code>)或关键字(如 <code>return</code>, <code>throw</code>, <code>case</code>, <code>in</code> 或 <code>new</code>)后永远不要使用括号.</p>
<ul>
<li>字符串</li>
</ul>
<p>单引号’比双引号”好.</p>
<p>基于一致性的考虑, 优先使用单引号(‘)而不是双引号(“). 在创建包含 HTML 的字符串中这非常有用.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> msg = <span class="string">'This is some HTML'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>可见性(<code>private</code> 和 <code>protected</code> 字段)</li>
</ul>
<p>鼓励, 使用 JSDoc 中的 <code>@private</code> 和 <code>@protected</code> 来标注.</p>
<p>我们推荐使用 JSDoc 中的 <code>@private</code> 和 <code>@protected</code> 来标注类, 函数, 属性的可见级别.</p>
<p>使用编译器标识 –jscomp_warning=visibility 可以开启对代码违背可见性的警告. 可以参考 <a href="http://code.google.com/p/closure-compiler/wiki/Warnings" target="_blank" rel="external">Closure Compiler Warnings</a>.</p>
<p>私有全局变量和函数( <code>@private</code> )只能在同一文件中访问.</p>
<p>标注了 <code>@private</code> 的构造函数只能在同一文件中实例化或者访问公共静态属性. 私有构造函数还可以在同一文件的任意位置使用 <code>instanceof</code> 操作符使用公共静态属性.</p>
<p>全局变量, 全局函数和全局构造函数任何时候都不要用 <code>@protected</code> 标注.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件 1.</span></span><br><span class="line"><span class="comment">// AA_PrivateClass_ 和 AA_init_ 可以访问因为它们是全局的并且在同一文件中.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * @private</span><br><span class="line"> * @constructor</span><br><span class="line"> */</span></span><br><span class="line">AA_PrivateClass_ = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** @private */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AA_init_</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> AA_PrivateClass_();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">AA_init_();</span><br></pre></td></tr></table></figure>
<p>标注了 <code>@private</code> 的私有属性在同一文件以及它所属类的静态方法和实例方法中都可以访问. 但处于不同文件的所属类的子类则无法访问和重载该属性.</p>
<p>标注了 <code>@protected</code> 的受限属性在同一文件, 以及包含这条属性的类及其任意子类的任意静态方法和实例方法中, 都可以访问.</p>
<p>注意这些语义与 C++ 和 Java 有所区别, 它们允许在同一文件中访问私有和受限属性, 而非限制在同一个类和类继承中. 另外, 不像 C++, 私有属性不允许被子类重载.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件 1.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** @constructor */</span></span><br><span class="line">AA_PublicClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/** @private */</span></span><br><span class="line">  <span class="keyword">this</span>.privateProp_ = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** @protected */</span></span><br><span class="line">  <span class="keyword">this</span>.protectedProp = <span class="number">4</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** @private */</span></span><br><span class="line">AA_PublicClass.staticPrivateProp_ = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** @protected */</span></span><br><span class="line">AA_PublicClass.staticProtectedProp = <span class="number">31</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** @private */</span></span><br><span class="line">AA_PublicClass.prototype.privateMethod_ = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** @protected */</span></span><br><span class="line">AA_PublicClass.prototype.protectedMethod = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件 2.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * @return &#123;number&#125; The number of ducks we've arranged in a row.</span><br><span class="line"> */</span></span><br><span class="line">AA_PublicClass.prototype.method = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 合法访问这两条属性.</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.privateProp_ + AA_PublicClass.staticPrivateProp_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件 3.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * @constructor</span><br><span class="line"> * @extends &#123;AA_PublicClass&#125;</span><br><span class="line"> */</span></span><br><span class="line">AA_SubClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 合法访问受限静态属性.</span></span><br><span class="line">  AA_PublicClass.staticProtectedProp = <span class="keyword">this</span>.method();</span><br><span class="line">&#125;;</span><br><span class="line">goog.inherits(AA_SubClass, AA_PublicClass);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * @return &#123;number&#125; The number of ducks we've arranged in a row.</span><br><span class="line"> */</span></span><br><span class="line">AA_SubClass.prototype.method = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 合法访问静态实例属性.</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.protectedProp;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>请注意在 JS 中, 类型(比如 <code>AA_PrivateClass_</code>)和类型的构造函数的可见性是没有区别的. 并没有办法让一个类型共有而令其构造函数为私有(因为很容易对构造函数使用别名从而破坏私有检查).</p>
</div><div class="tags"><a href="/tags/JavaScript/">JavaScript</a></div><div class="post-nav"><a href="/2015/12/27/Google-JS-代码风格指南（3）/" class="pre"><i class="icon-previous">Google JS 代码风格指南（3）</i></a><a href="/2015/12/27/Google-JS-代码风格指南（1）/" class="next">Google JS 代码风格指南（1）<i class="icon-next"></i></a></div><div data-thread-key="2015/12/27/Google-JS-代码风格指南（2）/" data-title="Google JS 代码风格指南（2）" data-url="http://yoursite.com/2015/12/27/Google-JS-代码风格指南（2）/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2015/12/27/Google-JS-代码风格指南（2）/" data-title="Google JS 代码风格指南（2）" data-url="http://yoursite.com/2015/12/27/Google-JS-代码风格指南（2）/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title">Categories</div></div><div class="widget"><div class="widget-title">Tags</div><div class="tagcloud"><a href="/tags/c-c/" style="font-size: 15px;">c/c++</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Emacs/" style="font-size: 15px;">Emacs</a></div></div><div class="widget"><div class="widget-title">Recent</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/02/21/Emacs个人笔记/">Emacs入门笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/08/有关C语言的闲聊/">有关C语言的闲聊</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/21/igcc-REPL-for-c-c/">igcc:c/c++解释器</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/29/使用nginx和nginx-rtmp搭建流媒体服务器/">使用 nginx 和 nginx-rtmp 搭建流媒体服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（5）/">Google JS 代码风格指南（5）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（4）/">Google JS 代码风格指南（4）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（3）/">Google JS 代码风格指南（3）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（2）/">Google JS 代码风格指南（2）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（1）/">Google JS 代码风格指南（1）</a></li></ul></div><div class="widget"><div class="comments-title">Recent Comments</div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title">Blogroll</div><ul></ul><a href="https://www.zhihu.com/people/craftman" title="知乎" target="_blank">知乎</a><ul></ul><a href="http://www.douban.com/people/craftman/" title="豆瓣" target="_blank">豆瓣</a></div></div></div></div><div id="footer">© <a href="/" rel="nofollow">Zen.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script>
<script src="/js/jquery.fancybox.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"><script>var duoshuoQuery = {short_name:'crafteverywhere'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script></div></body></html>