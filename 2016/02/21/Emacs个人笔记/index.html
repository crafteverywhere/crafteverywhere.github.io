<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description"/><title>Emacs入门笔记 | Zen</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Emacs入门笔记</h1><a id="logo" href="/">Zen</a><p class="description">craft‘s note</p></div><div id="nav-menu"><a href="/" class="current"><i class="icon-home"> Home</i></a><a href="/archives/"><i class="icon-archive"> Archive</i></a><a href="/atom.xml"><i class="icon-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">Emacs入门笔记</h1><div class="post-meta">2016-02-21 | </div><span data-thread-key="2016/02/21/Emacs个人笔记/" class="ds-thread-count"></span><div class="post-content"><p>春节前开始正式地系统学习 emacs, 目前已经基本上能够做到正常使用了.<br>这篇文章并不是一篇有效的 emacs 教程, 主要用来记录学习过程中的一些心得.</p>
<p>接触 Emacs 之前以使用 vim/sublime 为主. 在这次学习之前, 对Emacs所知甚少, 唯一印象深刻的命令是如何关掉它: <code>C-x C-c</code>, 算是非常彻底的从零开始.<br>这里先简单介绍一点有关 emacs 的基本常识.<br>Vim 和 emacs 都属于尽可能发挥键盘威力的文本编辑器: 但不同之处在于, vim 选择区分不同的模式分别用于命令和文本编辑, 而 emacs 采用了组合键的方式, 即使用键盘上的 Esc, Meta, Alt, Ctrl, Shift (因此坊间也戏称 emacs 为这一组功能键的头字母简写) 等功能键与字母区的按键组合来触发特定功能.<br>使用 emacs 时, 我们经常会将几个按键同时按下, 术语称之为键和弦, 在文档中, 用连字符将按键名相连来表示一个键和弦, 例如 <code>C-?</code> 表示将 Ctrl 键与 ? 按键一同按下, <code>M-?</code> 表示将 Meta 键与 ? 按键一同按下(作为非常古老的软件, emacs 的许多术语沿袭自计算机的洪荒年代, 现代美式键盘上没有 Meta 键, 我们使用 Alt 键作为替代; 有些键盘上也没有 Alt 键, 这时可以先按下 Esc 键然后释放, 再按 ? 键, 这种组合操作与 <code>M-?</code> 等效). 有些命令还需要配合上档键 Shift完成, 例如, 回到当前打开文件的首部的指令是 <code>M-&lt;</code>, 实际输入时需要同时按住 Alt, Shift 和 , 键.<br>Emacs自带的教程就是非常好的入门资料, 自然地, 我也选择从它来起步. 一边阅读一边参照着教程的指导进行练习, 认真过上几遍基本的操作就没什么大的问题了.<br>开启 emacs 内置教程的组合键为 <code>C-h t</code>, 意为同时按下 Ctrl 和 h, 松开, 然后再按 t 键. 如果系统的语言设置为中文, 则会默认开启已翻译中文的教程. 教程的组织形式简单明了, 还可以随时进行练习. 非常贴心的一点是, 修改过的 emacs 默认绑定键位也会在教程相应位置出现提示. Emacs 内置的文档也是必不可少的学习资料. 如果不确定某个组合键的功能, 遗忘了 ‘C-f’ 的作用, 可以使用 <code>C-h k C-f</code> 来查看对应的文档. 命令中的 k 指代 keyboard, 与之对应还有一条查询函数功能的命令: ‘C-h f’, 其中 f 指代 function. 使用组合键触发的功能还可以通过函数调用的方式来激活. 即使用 <code>M-x 函数名</code>. 许多函数会绑定到一些特定的组合键上. 这些函数大多数用 elisp 写成, 少数出于性能考虑使用 C 语言编写. Emacs 实际上可以视为一个 elisp 的解释环境, 其大多数的功能都通过这些函数来实现, 也允许用户自定义自己的 elisp 函数.<br>elisp 即 emacs lisp, 是一种专门用于 emacs 的 lisp 方言. 网上入门教程很多, 这里推荐看: <a href="https://learnxinyminutes.com/docs/elisp/" target="_blank" rel="external">learn x iny minutes where x = elisp</a>, 你可以将 el 格式(即 elisp 语言文件格式)下载到本地用 emacs 打开, 在实践过程中学习. 之后 emacs 的配置也需要懂一点 elisp 知识.</p>
<p>Emacs 的一组需要了解的特有术语和概念:<br>buffer:<br>简单地理解, emacs 中正在处理的一切都可以视为一个 buffer, 例如一个正在编辑的文件.<br>frame:<br>类似 windows 系统中 window (窗口)的概念.<br>window:<br>中文翻译为窗格, emacs 允许将一个 frame 划分为多个 window, 在不同的 window 中加载不同的 buffer 进行编辑操作. 出于历史原因, frame 与 window 与现在通用的术语含义有所区别.<br>point:<br>当前 window 中光标所在的位置.<br>echo area 与 minibuffer:<br>Echo area 位于 emacs 的 frame 的最下方, 会回显命令效果. 也是显示组合键输入缓存的地方. 比如 当 point 位于某个 elisp 函数后, 可以用’C-x C-e’ 执行它, 并将结果显示在 echo area 区域.(如果使用 ‘C-j’ 来执行函数, 结果会显示在 buffer 中 point 所在的位置.) 有的命令需要交互式地输入信息, 此时 echo area 会载入一个 minibuffer 供你进行编辑.</p>
<p>结合自带教程和一些补充资料, 就能对基础的命令和操作有一个初步的了解, 下面是我的学习总结:</p>
<p>滚屏操作:<br><code>C-v</code> 向前移动一屏.<br><code>M-v</code> 向后移动一屏.<br><code>C-l</code> 将 point 所在行居中; 再次输入会将 point 所在行置于屏幕顶端; 再次输入则移至底端.</p>
<p>基本的光标操作:<br><code>C-p</code> point 移动到上一行, p 代表 previous.<br><code>C-n</code> point 移动到下一行, n 代表 next.<br><code>C-b</code> point 向左移动一个字符, b 代表 backward.<br><code>C-f</code> point 向右移动一个字符, f 代表 forward.<br><code>M-b</code> point 移动到前一个”词首部”, emacs 是用空格区分词的, 因此在中文中, 效果是移动到上一句话的首部. 如果 point 位于词的中间, 则移动到当前词的首部.<br><code>M-f</code> point 移动到下一个”词尾部”.</p>
<p><code>C-a</code> point 移动到行首. a 代表 ahead.<br><code>C-e</code> point 移动到行尾, e 代表 end.<br><code>M-a</code> point 移动到段首.<br><code>M-e</code> point 移动到段尾.</p>
<p><code>M-&lt;</code> point 移动到 buffer 首部.<br><code>M-&gt;</code> point 移动到 buffer 尾部.</p>
<p>容易发现, Meta 主要用来操作由语言定义的单位(词,句,段), 而 Ctrl 常用来操作与编辑相关的单位(字符,行).</p>
<p>例如, Meta 组合键可以用来控制文本的大小写:<br><code>M-u</code> 当前词全部大写.<br><code>M-l</code> 当前词全部小写.<br><code>M-c</code> 当前词首字母大写, 其余小写.</p>
<p>常用的编辑操作:<br>普通的输入是所见即所得的, 不需要像 vim 那样切换到插入模式.</p>
<p><code>&lt;RET&gt;</code> 回车键可以换行. 实际上默认的回车绑定了 elisp 函数 newline.</p>
<p>删除/剪切操作如下:<br><code>&lt;del&gt;</code> 删去 point 所在位置的前一个字符.<br><code>C-d</code> 删去 point 所在位置的字符, d 代表 delete.<br><code>M-&lt;DEL&gt;</code> 剪切 point 所在位置的前一个词.<br><code>M-d</code> 剪切 point 所在位置的后一个词.<br><code>C-k</code> 剪切 point 所在位置到行尾的字符, 如果为空行则剪切行, k 代表 kill.<br><code>M-k</code> 剪切 point 所在位置到行首的字符.<br><code>C-w</code> 剪切当前选中的区域, 如没有选中区域, 剪切当前行.<br><code>C-&lt;SPC&gt;</code> 配合光标移动操作来选中一段文本. 在中文环境下会与输入法的热键冲突.<br><code>C-@</code> 效果等同 <code>C-&lt;SPC&gt;</code>.</p>
<p>实际运用时需要灵活使用多对组合键完成功能: 例如, 剪切一行的操作也可以用 <code>C-a C-k C-k</code>.</p>
<p>删除与剪切操作略有区别. 删除的字符不会保存, 而剪切的文本会保存在剪贴板中, 可以使用 <code>C-y</code> 将剪贴板的内容插入到 buffer 中 point 所在位置, 这里 y 代表 yank, 中文教程中翻译为召回.<br>连续使用的剪切操作会将内容保存在同一个剪贴板中, 使用 <code>C-y</code> 便能一次性将其召回.<br>如果要插入更老的剪切内容, 可以使用 <code>M-y</code>. 多次使用 <code>M-y</code> 能够轮询所有可用的剪贴板.</p>
<p>撤销操作:<br><code>C-/</code> 撤销上一个命令带来的所有改变.<br>与之等效的还有 <code>C-_</code>, ‘C-x u’.</p>
<p>为操作调用的函数附加参数:<br><code>C-u</code> 有些函数接受额外的参数. 使用键和弦 <code>C-u</code> 后可以输入一个数, 作为下一个命令调用的函数的参数传入. 数字参数的效果通常是重复执行函数的次数, 例如, <code>C-u 20 C-f</code> 的效果是 point 向前移动 20 个字符. 也有例外, 比如 <code>C-v</code> 和 <code>M-v</code> 在接受数字参数后, 参数将指定滚屏的行数而非屏数.<br><code>C-[NUM]</code> [NUM] 限制为 0~9 的数字. 效果类似 <code>C-u</code>.<br><code>M-[NUM]</code> 与 <code>C-[NUM]</code> 等效.<br>用以上命令便可以重复执行多次同一个函数了.</p>
<p>中止操作:<br><code>C-g</code> 中止失去响应或者执行过久的命令. 也可以用于取消数字参数和输入了一半的命令.</p>
<p>与 frame, window, buffer 相关的命令:<br>这种命令多以键和弦 <code>C-x</code> 开头.<br>例如回到 buffer 首部除了 <code>M-&lt;</code> 外也可以用 <code>C-x [</code>; 跳往 buffer 尾部除了 <code>M-&gt;</code> 还可以用 <code>C-x ]</code>.</p>
<p>可以在一个 frame 中打开多个 window.<br><code>C-x 2</code> 将当前的 window 水平划分为 2 个 windows.<br><code>C-x 3</code> 将当前的 window 竖直划分为 2 个 windows.<br>注意由于 window 的划分方式总是由一个 window 二分形成, 因此 所有的 windows 形成了一个二叉树形状的拓扑结构.<br><code>C-x 1</code> 关闭其他 window (注意不等同于关闭其他 window 显示的 buffer), 让当前 window 占据整个 frame.<br><code>C-x 0</code> 关闭当前window. 注意为数字 0 而不是字母 o.<br><code>C-x o</code> 跳转 window 操作. 将 point 跳转到下一个 window 的光标所在位置. 注意是字母 o 不是数字 0.<br><code>C-M-v</code> 滚动 windows 二叉树中的兄弟 window 的屏幕. 同时打开两个屏幕时这条命令非常实用. 能够在不切换窗格的情况下翻动另外一个窗格的内容.</p>
<p>打开文件的操作为:<br><code>C-x C-f</code> 打开文件. 打开一个文件并将其载入为一个 buffer, 如果没有则先创建一个新的 buffer. 载入后的 buffer 会占据当前的 window.<br><code>C-x C-v</code> 打开另一个文件. 关闭当前的 buffer, 并打开另一个文件将其载入为 buffer. 注意, 如果由多个 window 同时显示这个 buffer, 那么它们会一起被关闭并都载入新的 buffer.</p>
<p>保存文件的操作为:<br><code>C-x C-s</code> 将当前 window 的 buffer 保存到文件中. 如果对使用 <code>C-x C-f</code> 新建的 <code>buffer</code> 使用, 则此时将创建一个新文件.<br><code>C-x C-w</code> 相当于另存为.</p>
<p>切换当前 window 中载入的 buffer:<br><code>C-x C-b</code> 显示当前的 buffers 列表.<br><code>C-x b [BUFFER]</code> 在当前的 window 打开某个 buffer.<br><code>C-x s</code> 保存多个 buffers.<br>如果在有方向键的键盘上, <code>C-x</code> 加方向键可以在当前 window 中轮询切换所有打开的 buffers.</p>
<p>新建 frame:<br><code>M-x make-frame</code> 新建一个 frame, 在图形界面下可以同时显示多个 frame, 在命令行界面下只能显示一个 frame.<br><code>M-x delete-frame</code> 关闭当前所在的 frame.</p>
<p>撤销递归编辑:<br>当一次操作没有完成又进行了另外一次操作时, 将进入递归编辑状态(RECURSIVE EDITING LEVELS). 使用 <code>ESC ESC ESC</code> 可以退出递归编辑状态, 这条命令也可以用来关掉多余的 window 或者离开 minibuffer 区域.</p>
<p>其他命令:<br>emacs 提供的函数数量非常庞大, 而组合键的数量十分有限, 因此更多的函数调用通过<br><code>M-x 函数名</code>的方式来实现.</p>
<p>文本模式:<br>为了针对不同类型的文件和编辑操作使用不同的配置, Emacs 可以设置为不同的文本模式. 不同的文本模式下, emacs 处理文本的方式会有所区别.<br>文本模式会显示在 echo area 上方的状态栏 mode line 中. 状态栏显示的信息可以通过配置进行修改, 一般在光标位置信息右侧显示的就是文本模式信息.<br>文本模式分两类: 主模式 (major mode) 和辅模式 (minor mode). 主模式提供基本的配置, 辅模式可以提供额外的一些小功能. Emacs 同时有且只能设置为一种主模式, 但是可以设置多个辅模式.<br>缺省模式称为 Funamental, 它是一种主模式.<br>处理自然语言(如写日记)可以切换到 text-mode 下: 使用命令 <code>M-x text-mode</code> 即可. 咋看之下与缺省模式毫无区别, 但细心一些会发现 M-f 和 M-b 等处理单位为词的命令将单引号(‘)视为词的一部分了.<br>使用命令 <code>M-x auto-fill-mode</code> 可以打开一个具有自动换行功能的辅模式, 自动换行的行宽通过 <code>C-u</code> 向 <code>C-x f</code> 传入一个数字参数来设置, 默认设置一般为 70.<br>再次输入开启文本的模式命令能够关闭该模式.</p>
<p>搜索:<br><code>C-s</code> 从 point 位置向下文搜索.<br>这种搜索会从起点开始搜寻目标, 并将 point 移动到目标位置. 搜索并不是在命令完成后开始的, 一旦开始输入目标字符串, Emacs 就会开始试图查找目标, 并将光标移动到符合结果的位置去, 如果使用 <code>&lt;DEL&gt;</code> 删除了目标字符串的一个字符, 光标会跳回上一个符合结果的目标处. 输入完成后, 再次按下 <code>C-s</code> 可以查找下一个符合的结果. 这种搜索方式称为增量搜索.<br>对应的命令还有:<br><code>C-r</code> 从 point 位置向上文搜索.<br>默认的这两条指令不是基于正则表达式的, 在我目前的配置中, 它们被替换为了基于正则表达式搜索的版本.</p>
<p>文档与帮助:<br>这类命令多以 <code>C-h</code> 打头.<br><code>C-h m</code> 查看当前文本模式的文档.<br><code>C-h k</code> 查看组合键文档.<br><code>C-h f</code> 查看函数文档.<br><code>C-h v</code> 查看当前环境中某个变量绑定的值.<br><code>C-h t</code> 自带教程.</p>
</div><div class="tags"><a href="/tags/Emacs/">Emacs</a></div><div class="post-nav"><a href="/2016/02/08/有关C语言的闲聊/" class="next">有关C语言的闲聊<i class="icon-next"></i></a></div><div data-thread-key="2016/02/21/Emacs个人笔记/" data-title="Emacs入门笔记" data-url="http://yoursite.com/2016/02/21/Emacs个人笔记/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2016/02/21/Emacs个人笔记/" data-title="Emacs入门笔记" data-url="http://yoursite.com/2016/02/21/Emacs个人笔记/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title">Categories</div></div><div class="widget"><div class="widget-title">Tags</div><div class="tagcloud"><a href="/tags/Emacs/" style="font-size: 15px;">Emacs</a> <a href="/tags/c-c/" style="font-size: 15px;">c/c++</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a></div></div><div class="widget"><div class="widget-title">Recent</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/02/21/Emacs个人笔记/">Emacs入门笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/08/有关C语言的闲聊/">有关C语言的闲聊</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/21/igcc-REPL-for-c-c/">igcc:c/c++解释器</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/29/使用nginx和nginx-rtmp搭建流媒体服务器/">使用 nginx 和 nginx-rtmp 搭建流媒体服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（5）/">Google JS 代码风格指南（5）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（4）/">Google JS 代码风格指南（4）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（3）/">Google JS 代码风格指南（3）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（2）/">Google JS 代码风格指南（2）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/27/Google-JS-代码风格指南（1）/">Google JS 代码风格指南（1）</a></li></ul></div><div class="widget"><div class="comments-title">Recent Comments</div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title">Blogroll</div><ul></ul><a href="https://www.zhihu.com/people/craftman" title="知乎" target="_blank">知乎</a><ul></ul><a href="http://www.douban.com/people/craftman/" title="豆瓣" target="_blank">豆瓣</a></div></div></div></div><div id="footer">© <a href="/" rel="nofollow">Zen.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script>
<script src="/js/jquery.fancybox.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"><script>var duoshuoQuery = {short_name:'crafteverywhere'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script></div></body></html>